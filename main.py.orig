import os
<<<<<<< HEAD
import random
import foodMap
FoodMap = [[0 for x in xrange(100)] for x in xrange(100)]
=======
from food_map import create_random_food_map
from code_generation import create_code
>>>>>>> 4f7e30a1cd58b32919d52a9454589549b8d6df27
x = 50
y = 50
life = 100

def main():
<<<<<<< HEAD
    #Create a thousand genetic code mutations and fifty foodmaps
    codeMutations = []
    foodMaps = []
    for _ in range(1000):
        codeMutations.push(getCodeMutation);
    for _ in range(50):
        foodMaps.push(create_random_food_map);
    results = [] # contains tuples of each mutation along with how long mutation survived

    #Run each mutation with ten random food maps.
    for codeMutation in codeMutations:
        currentMutation = convert_code_from_list_to_string(codeMutation)
        for _ in range(10):
            randomFoodMap = random.choice(foodMap)
            results.push(currentMutation, numIterations)
            resetGlobals()
    sorted(results, key=lambda result: result[1]) #sort by length of life
    print "The top mutation was as follows: \n" + results[0]



    
def resetGlobals():
    x = 50
    y = 50
    life = 100
    numIterations = 0
=======
    code = create_code()
    food_map = create_random_food_map()
    while life > 0:
        code_as_string = convert_code_from_list_to_string(code)
        exec code_as_string
    print code_as_string
>>>>>>> 4f7e30a1cd58b32919d52a9454589549b8d6df27


def convert_code_from_list_to_string(input_code):
    output_code = ""
    for line in input_code:
        output_code = output_code + os.linesep + line
    return output_code


def update_everything():
    global x
    global y
    global FoodMap
    global life
    global numIterations
    numIterations += 1
    life -= 1
    if FoodMap[x][y] > 0:
        eat = min(FoodMap[x][y], 10)
        life += eat
        FoodMap[x][y] -= eat
    print "Position = [" + str(x) + "," + str(y) + "], Life = " + str(life) + ", length of life = " + numIterations


def up():
    global y
    y -= 1
    y = max(y, 0)
    update_everything()


def right():
    global x
    x += 1
    x = min(x, 99)
    update_everything()


def down():
    global y
    y += 1
    y = min(y, 99)
    update_everything()


def left():
    global x
    x -= 1
    x = max(x, 0)
    update_everything()


def on_food_square():
    return FoodMap[x][y] > 0


if __name__ == '__main__':
    main()

